<script>
    var lazyListAutoHeight = _.debounce(function () {
      if($(window).width() >= 992) {
        max = $(window).height() - $('.results-list').offset().top;
        $('.results-list').css('max-height', max - 75);
      }
      else
        $('.results-list').css('max-height', '');
    }, 500);

    $(document).ready(function() {
      $('.results-list').bind('DOMNodeInserted DOMNodeRemoved', lazyListAutoHeight);
      $(window).resize(lazyListAutoHeight);
    });
</script>

<div class="container-fluid">
  <h4>Results for: "{{searchTerm | title}}"</h4>
  <div class="list-group results-list">
    <a ui-sref="home.drugdetails({name:result.openfda.brand_name[0], drugDetails:result})" class="list-group-item jumbotron results-list-item" ng-repeat="result in results">
          <span class="col-xs-1" ng-show="result.has_ongoing_recalls">
                <span class="recall-alert-bar">RECALL</span>
          </span>
	  <div class="row list-group-item-heading">
		<span class="drugtitle col-xs-12">
		  <strong>
			{{result.openfda.brand_name[0] | title}}
		  </strong>
		</span>
	  </div>
	  <div class="row">
		<div class="row col-xs-8">
		  <p class="list-group-item-text">
			<div class="row">
			  <span class="col-xs-3">
				Active Ing:
			  </span>
			  <span class="col-xs-8 ">
			    {{result.active_ingredient[0] | uppercase}}
			  </span>
			</div>
		  </p>
		  <p class="list-group-item-text">
			<div class="row">
			  <span class="col-xs-3">Purpose:</span>
			  <span class="col-xs-8">{{result.purpose[0] | sentence}}</span>
			</div>
		  </p>
		  <p class="list-group-item-text">
			<div class="row">
			  <span class="col-xs-3">Conditions:</span>
			  <span class="col-xs-8">{{result.indications_and_usage[0] | sentence}}</span>
			</div>
		  </p>
		</div>
		<div class="row col-xs-4">
		  <div class="row-fixed">
			<span class="row col-xs-1 col-xs-height captioned-image">
			  <img src="images/logo.png" />
			  <span class="caption">Over the Counter</span>
			</span>
			<span class="row col-xs-1 col-xs-height captioned-image">
			  <img src="images/logo.png" />
			  <span class="caption">Oral Pill</span>
			</span>
			<span class="row col-xs-1 col-xs-height captioned-image">
			  <img src="images/logo.png" />
			  <span class="caption">Toddler</span>
			</span>
		  </div>
		</div>
	  </div>
    </a>
  </div>
</div>
